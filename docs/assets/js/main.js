"use strict";const buttonSearch=document.querySelector(".js-button-search"),listContainer=document.querySelector(".js-list-container"),favsContainer=document.querySelector(".js-fav-list-container"),nameSerie=document.querySelector(".js-name-serie"),resetItem=document.querySelector(".js-reset-item");let seriesList=[],favorites=[];const handleSearch=e=>{e.preventDefault(),search(nameSerie.value)},handleReset=e=>{e.preventDefault(),nameSerie.value="",search("")};buttonSearch.addEventListener("click",handleSearch),resetItem.addEventListener("click",handleReset);const search=e=>{fetch("https://api.jikan.moe/v4/anime?q="+e).then(e=>e.json()).then(e=>{seriesList=e.data,getFavoritesFromLocalStorage(),renderResultList(),renderFavorites()})},renderFavorites=()=>{favsContainer.innerHTML="";for(const e of favorites)favsContainer.innerHTML+=getHtmlForCard(e,!1,!1);if(setTimeout(()=>{for(const e of favorites){document.getElementById("close-favorite-"+e.mal_id).addEventListener("click",removeFavorite)}},100),favorites&&favorites.length>0){favsContainer.innerHTML+='<button class="reset-favorites btn" id="reset-favorites">Reset favorites</button>';document.getElementById("reset-favorites").addEventListener("click",handleResetFavorites)}},handleResetFavorites=()=>{favorites=[],localStorage.setItem("favorites",JSON.stringify([])),renderResultList(),renderFavorites()},removeFavorite=e=>{const t=parseInt(e.target.id.split("close-favorite-")[1]);favorites=favorites.filter(e=>e.mal_id!==t),localStorage.setItem("favorites",JSON.stringify(favorites)),renderResultList(),renderFavorites()},getHtmlForCard=(e,t,r)=>`\n    <div class="colors${r||!t?" favorite":""}" id="${t?"":"favorite-"}${e.mal_id}">\n        <div class="series">\n            <h3 class="title">${e.title}</h3>\n            <img class="image" src="${e.images.jpg.image_url}" alt="imagen de ${e.title}">\n        </div>\n        ${t?"":`<i class="fa-solid fa-xmark close-favorite-icon" id="close-favorite-${e.mal_id}"></i>`}\n        \n    </div>\n    `,renderResultList=()=>{listContainer.innerHTML="";for(const e of seriesList){const t=-1!==favorites.findIndex(t=>e.mal_id===t.mal_id);listContainer.innerHTML+=getHtmlForCard(e,!0,t)}for(const e of seriesList){document.getElementById(e.mal_id).addEventListener("click",handleFavorite)}},handleFavorite=e=>{e.preventDefault();const t=parseInt(e.currentTarget.id),r=seriesList.find(e=>e.mal_id===t);if(r){document.getElementById(r.mal_id).classList.toggle("favorite");const e=favorites.findIndex(e=>e.mal_id===r.mal_id);-1===e?favorites.push(r):favorites.splice(e,1),localStorage.setItem("favorites",JSON.stringify(favorites)),renderFavorites()}},getFavoritesFromLocalStorage=()=>{let e=JSON.parse(localStorage.getItem("favorites"));favorites=e||[]};